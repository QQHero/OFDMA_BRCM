(window.webpackJsonp=window.webpackJsonp||[]).push([["macfilter"],{"0297":function(t,e,a){},"40d1":function(t,e,a){},"7f31":function(t,e,a){"use strict";a("0297")},8367:function(t,e,a){"use strict";a("40d1")},e5c6:function(t,e,a){"use strict";a.r(e);a("4e3f");var i=a("d2db"),s=a("05af"),l=a("7886"),o=a("710d"),r=a("c907"),c=a("f07d"),n={mixins:[r.a,c.a],props:{formData:{type:Object,default:()=>({})},isBlackList:{type:Boolean,default:!0}},data(){return{rules:{mac:[Object(o.e)(s.d),this.checkMac],hostname:Object(o.e)(l.d)}}},computed:{showModaltitle(){return this.isBlackList?_("Add Blacklist"):_("Add Whitelist")}},methods:{checkMac(){if(this.tableData.some(({mac:t})=>t.toUpperCase()==this.formData.mac.toUpperCase()))return _("The MAC address already exists")},changeDev(t){this.$nextTick(()=>{this.formData.hostname=this.macToName[t],this.formData.mac=this.isManual?"":t,!this.isManual&&this.$refs.mac.checkValid()})},beforeSubmit:t=>(delete t.chooseDev,t)}},m=a("0b56"),d=Object(m.a)(n,(function render(){var t=this,e=t._self._c;return e("v-dialog",{attrs:{title:t.showModaltitle,width:628},on:{confirm:t.submit},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[e("div",[e("v-form",{ref:"form",attrs:{rules:t.rules,dialogCenter:!0}},[e("v-form-item",{attrs:{label:t._("Select Device"),prop:"chooseDev"}},[e("v-select",{attrs:{options:t.chooseDevOption},on:{change:t.changeDev},model:{value:t.formData.chooseDev,callback:function(e){t.$set(t.formData,"chooseDev",e)},expression:"formData.chooseDev"}})],1),e("v-form-item",{directives:[{name:"show",rawName:"v-show",value:t.isManual,expression:"isManual"}],attrs:{label:t._("Device Name"),prop:"hostname",disabled:!t.isManual}},[e("v-input",{attrs:{maxlength:60},model:{value:t.formData.hostname,callback:function(e){t.$set(t.formData,"hostname",e)},expression:"formData.hostname"}})],1),e("v-form-item",{ref:"mac",attrs:{label:t._("MAC Address"),prop:"mac"}},[e("v-input",{attrs:{maxlength:17,placeholder:t._("Format: XX:XX:XX:XX:XX:XX"),disabled:!t.isManual},model:{value:t.formData.mac,callback:function(e){t.$set(t.formData,"mac",e)},expression:"formData.mac"}})],1)],1)],1)])}),[],!1,null,null,null).exports,h=a("719d"),u=a("7736"),f=a("32a0");const{mapState:p}=Object(u.a)("devList"),b={chooseDev:"manual",hostname:"",mac:""};var v={mixins:[h.a],components:{macFilterDialog:d},props:{blackTableData:{type:Array,default:()=>[]},whiteTableData:{type:Array,default:()=>[]},localhost:{type:Object,default:()=>({})},isBlackList:{type:Boolean,default:!0}},data(){return{tableKey:"mac",maxNum:f.b,formData:Object(o.e)(b),formDefault:Object(o.e)(b),tableItem:[{key:"hostname",label:_("Device Name"),format:(t,e)=>""==e[t]?_("Unknown"):e[t],isTooltip:!0},{key:"mac",label:_("MAC Address"),format:this.toUpperCase}]}},computed:{...p({deviceList:t=>t.deviceOnlineList}),tableData(){return this.isBlackList?this.blackTableData:this.whiteTableData},title(){return this.isBlackList?_("Blacklist Device"):_("Whitelist")},delText(){return this.isBlackList?_("Do you want to remove the client from the blacklist?"):_("Are you sure you want to remove the device from the whitelist?")},showAddAll(){return!this.isBlackList&&this.offListDev.length},offListDev(){let t=[];return t=Object(o.o)(this.deviceList,this.whiteTableData,"mac",!0).map(({hostname:t,mac:e})=>({hostname:t,mac:e})),t}},methods:{changePage(){this.$refs.table.changePage(1)},toUpperCase:(t,e)=>e[t].toUpperCase(),addOnlineDev(){this.whiteTableData.push(...this.offListDev)}}},D=(a("7f31"),Object(m.a)(v,(function render(){var t=this,e=t._self._c;return e("div",{staticClass:"v-page-table"},[e("div",{staticClass:"v-page-table__title"},[e("span",[t._v(" "+t._s(t.title)+" ")]),t.showAddAll?e("v-button",{staticClass:"add-all-device",attrs:{type:"text"},on:{click:t.addOnlineDev}},[t._v(t._s(t._("Add all online devices to the whitelist")))]):t._e()],1),e("div",{staticClass:"v-page-table__add-icon icon-add2",on:{click:t.addListEvent}}),e("v-table",{ref:"table",attrs:{data:t.tableData,"row-key":"mac",stripe:"",isPagination:!0}},[t._l(t.tableItem,(function(t){return e("v-table-col",{key:t.key,attrs:{align:"center",prop:t.key,label:t.label,format:t.format,isTooltip:!!t.isTooltip}})})),e("v-table-col",{attrs:{prop:"option",label:t._("Operation"),align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[t.isBlackList||a.mac.toUpperCase()!=t.localhost.mac.toUpperCase()?e("v-popconfirm",{ref:"popconfirm",attrs:{icon:"v-icon-remind-plane popconfirm-custom-icon",title:t.delText,clickOutsideToHide:!0},on:{confirm:function(e){return t.submitDel(a)}}},[e("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t._("Delete"),expression:"_('Delete')"}],staticClass:"icon-delete v-page-table__icon",attrs:{slot:"reference"},slot:"reference"})]):e("div",[t._v(" "+t._s(t._("Local Host"))+" ")])]}}])})],2),e("mac-filter-dialog",{ref:"dialog",attrs:{tableData:t.tableData,formData:t.formData,isBlackList:t.isBlackList,localhostMac:t.localhost.mac,hasOfflineDev:!0,hasGuestDev:!0},on:{submitAdd:t.submitAdd}})],1)}),[],!1,null,null,null).exports),k={mixins:[i.a],components:{macTable:D},props:{blackList:{type:Array,default:()=>[]},whiteList:{type:Array,default:()=>[]},localhost:{type:Object,default:()=>({})}},data:()=>({showAddAll:!1,modeOptions:[{value:"deny",label:_("Blacklist"),tips:_("(Only block internet access from client with listed MAC address)")}]}),computed:{isBlackList(){return"deny"==this.formData.curFilterMode}},methods:{changeMacFilterEn(t){t||this.$nextTick(()=>{this.$emit("submit")})},changeFilterMode(t){"allow"==t&&0==this.whiteList.length&&this.whiteList.push({hostname:this.localhost.hostname,mac:this.localhost.mac}),this.$refs.table.changePage()},beforeSubmit(t){return t.whiteList=this.whiteList,t.blackList=this.blackList,t.curFilterMode=this.formData.curFilterMode,t}}},w=(a("8367"),Object(m.a)(k,(function render(){var t=this,e=t._self._c;return e("v-form",{ref:t.name},[e("v-form-item",{attrs:{label:t._("MAC Address Filter"),prop:"macFilterEn"}},[e("v-switch",{on:{change:t.changeMacFilterEn},model:{value:t.formData.macFilterEn,callback:function(e){t.$set(t.formData,"macFilterEn",e)},expression:"formData.macFilterEn"}})],1),e("collapse-transition",[t.formData.macFilterEn?e("div",[e("v-form-item",{staticClass:"mac-filter-set__mode",attrs:{label:t._("Filter mode"),prop:"curFilterMode"}},[e("v-radio",{attrs:{options:t.modeOptions},on:{change:t.changeFilterMode},model:{value:t.formData.curFilterMode,callback:function(e){t.$set(t.formData,"curFilterMode",e)},expression:"formData.curFilterMode"}})],1),e("mac-table",{ref:"table",attrs:{blackTableData:t.blackList,whiteTableData:t.whiteList,isBlackList:t.isBlackList,localhost:t.localhost}})],1):t._e()])],1)}),[],!1,null,null,null).exports);const{mapActions:g}=Object(u.a)("devList");var L={components:{macFilter:w},data:()=>({pageTitle:_("MAC Address Filter"),pageTips:_("Allow or disallow internet access through this router for specified clients."),isloading:!0,macFilter:{},blackList:[],whiteList:[],localhost:{}}),created(){this.updateData()},methods:{...g(["setDevData"]),init(){this.updateData()},submit(){this.$refs.page.submitForm()},updateData(){this.$getData({modules:"macFilter,deviceList,localhost"}).then(t=>{this.macFilter=Object(o.e)(t.macFilter),this.blackList=Object(o.e)(t.macFilter.blackList),this.whiteList=Object(o.e)(t.macFilter.whiteList),this.localhost=Object(o.e)(t.localhost),this.setDevData(t.deviceList),this.isloading=!1})}}},F=Object(m.a)(L,(function render(){var t=this,e=t._self._c;return e("div",{staticClass:"mac-filter-set"},[e("v-page-title",{attrs:{title:t.pageTitle,tips:t.pageTips}}),e("v-loading",{attrs:{visible:t.isloading}}),t.isloading?t._e():e("v-page",{ref:"page",attrs:{showFooter:this.macFilter.macFilterEn},on:{init:t.init}},[e("mac-filter",{attrs:{name:"macFilter",formData:t.macFilter,blackList:t.blackList,whiteList:t.whiteList,localhost:t.localhost},on:{submit:t.submit}})],1)],1)}),[],!1,null,null,null);e.default=F.exports}}]);