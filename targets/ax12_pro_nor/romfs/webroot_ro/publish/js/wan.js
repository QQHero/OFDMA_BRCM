(window.webpackJsonp=window.webpackJsonp||[]).push([["wan"],{"1af0":function(t,a,e){},"7fb5":function(t,a,e){"use strict";e.r(a);var s=e("d60d"),n=e("05af"),i=e("d2db"),r=e("c359"),o=e("710d"),c={components:{WanDns:r.a},mixins:[i.a],props:{isWispMode:{type:Boolean,default:!1}},data(){return this.mtuOption=Object(o.e)(n.f),this.macCloneOptions=Object(o.e)(n.c),{rules:{wanMTU:Object(o.e)(n.g),macAddr:Object(o.e)(n.d),wanServerName:{type:"pppoe",args:[1,63]},wanServiceName:{type:"pppoe",args:[1,63]}},showAdvancve:!1}},watch:{mtuEnd:{handler(t){this.$set(this.rules.wanMTU,"args",[1280,t])},immediate:!0}},computed:{showPppoe(){return this.relativeData.wanType==n.u.PPPOE||this.relativeData.wanType==n.u.PPPOE2},showDns(){return this.relativeData.wanType!==n.u.STATIC&&this.relativeData.ispType!==n.n.RUSSIA},mtuEnd(){return this.changeMtuSelect(this.relativeData.wanType),{pppoe:1492,pppoe2:1492,l2tp:1460,pptp:1460,static:1500,dhcp:1500}[this.relativeData.wanType]||1500},showMacCloneInput(){return"manual"==this.formData.macClone},macStr(){return"default"==this.formData.macClone?_("Default MAC Address:")+this.formData.macDefault.toUpperCase():_("Local MAC Address:")+this.formData.macLocal.toUpperCase()}},methods:{changeWantype(t){this.isWispMode||(this.changeDefaultMtu(t),this.$nextTick(()=>{this.$set(this.rules.wanMTU,"args",[1280,this.mtuEnd]),t&&this.$refs.wanMTU.checkValid()})),t==n.u.DHCP&&(this.formData.wanDnsAuto=!0)},changeDefaultMtu(t){t&&(this.formData.wanMTU={pppoe:"1480",pppoe2:"1480",l2tp:"1400",pptp:"1400",static:"1500",dhcp:"1500"}[t]),t&&this.changeMtuSelect(t)},changeMtuSelect(t){this.mtuOption=Object(o.e)(n.f),"pptp"!=t&&"l2tp"!=t||(this.mtuOption.pop(),this.mtuOption.pop())},checkForm(){let t=this.$refs[this.name].checkValidate();return t||(this.showAdvancve=!0),t},changeArgs(){this.$emit("changeArgs")},beforeSubmit(t){t.wanType=this.relativeData.wanType,t.wanMTU&&(t.wanMTU=~~t.wanMTU+"")}}},p=(e("87ae"),e("0b56")),u=Object(p.a)(c,(function render(){var t=this,a=t._self._c;return a("v-form",{ref:t.name,staticClass:"wan-advance",attrs:{rules:t.rules,beforeSubmit:t.beforeSubmit},on:{change:t.changeArgs}},[!t.isWispMode||t.showDns?a("v-form-item",{staticClass:"wan-advance__btn-warp",attrs:{label:"",prop:""}},[a("div",{staticClass:"v-input wan-advance__text"},[a("v-button",{attrs:{type:"text","suffix-icon":"icon-down-line"+(t.showAdvancve?" wan-advance__btn--expansion":"")},on:{click:function(a){t.showAdvancve=!t.showAdvancve}}},[t._v(t._s(t._("Advanced")))])],1)]):t._e(),a("collapse-transition",[a("div",{directives:[{name:"show",rawName:"v-show",value:t.showAdvancve,expression:"showAdvancve"}]},[t.showPppoe?a("div",[a("v-form-item",{key:"wanServerName",attrs:{label:t._("Server Name"),prop:"wanServerName",required:!1}},[a("v-input",{attrs:{maxlength:128,placeholder:t._("Default setting is recommended")},model:{value:t.formData.wanServerName,callback:function(a){t.$set(t.formData,"wanServerName",a)},expression:"formData.wanServerName"}})],1),a("v-form-item",{key:"wanServiceName",attrs:{label:t._("Service Name"),prop:"wanServiceName",required:!1}},[a("v-input",{attrs:{maxlength:128,placeholder:t._("Default setting is recommended")},model:{value:t.formData.wanServiceName,callback:function(a){t.$set(t.formData,"wanServiceName",a)},expression:"formData.wanServiceName"}})],1)],1):t._e(),t.isWispMode?t._e():a("v-form-item",{key:"wanMTU",ref:"wanMTU",attrs:{label:"MTU",prop:"wanMTU"}},[a("v-select",{attrs:{"is-manual":"","manual-text":t._("Custom"),allow:/[0-9]/g,maxlength:4,options:t.mtuOption},model:{value:t.formData.wanMTU,callback:function(a){t.$set(t.formData,"wanMTU",a)},expression:"formData.wanMTU"}})],1),t.isWispMode?t._e():a("v-form-item",{key:"macClone",attrs:{label:t._("MAC Address Clone"),prop:"macClone"}},[a("v-select",{attrs:{options:t.macCloneOptions},model:{value:t.formData.macClone,callback:function(a){t.$set(t.formData,"macClone",a)},expression:"formData.macClone"}}),t.showMacCloneInput?t._e():a("div",{staticClass:"tip-text"},[t._v(" "+t._s(t.macStr)+" ")])],1),t.showMacCloneInput&&!t.isWispMode?a("v-form-item",{key:"macAddr",attrs:{label:t._("Custom MAC Address"),prop:"macAddr"}},[a("v-input-group",{attrs:{type:"mac",maxlength:17,allow:/[0-9a-fA-F:]/g},model:{value:t.formData.macAddr,callback:function(a){t.$set(t.formData,"macAddr",a)},expression:"formData.macAddr"}})],1):t._e(),t.showDns?a("wan-dns",{attrs:{formData:t.formData}}):t._e()],1)])],1)}),[],!1,null,null,null).exports,l={props:{formData:{type:Object,default:()=>({})}},data:()=>({}),computed:{currentStatus(){return n.s[this.formData.connectCode]||_("b#fLg#Disconnected")},statusClass(){return{[n.r.NETWORKED]:"success-text",[n.r.NOT_PLUGGED]:"error-text",[n.r.ACCOUNT_ERROR]:"error-text",[n.r.NO_RESPONSE]:"error-text",[n.r.NETWORKING_FAILURE]:"error-text"}[this.formData.connectCode]||""},currentTips(){return n.t[this.formData.connectCode]||[]},showConnectTime(){return this.formData.connectCode==n.r.NETWORKED},connectTime(){return Object(o.h)(this.formData.connectTime)}}},w=(e("9266"),Object(p.a)(l,(function render(){var t=this,a=t._self._c;return a("v-form",{staticClass:"wan-status"},[a("v-form-item",{attrs:{label:t._("Network Status"),prop:"connectCode"}},[a("div",{staticClass:"wan-status__text",class:t.statusClass},[t._v(" "+t._s(t.currentStatus)+" ")]),a("div",{staticClass:"wan-status__tips"},t._l(t.currentTips,(function(e,s){return a("p",{key:e+s},[t._v(t._s(e))])})),0)]),t.showConnectTime?a("v-form-item",{attrs:{label:t._("Connected time"),prop:"connectTime"}},[a("div",{staticClass:"wan-status__text"},[t._v(t._s(t.connectTime))])]):t._e()],1)}),[],!1,null,null,null).exports),d=e("e117"),h=e("7736"),m=e("d665");const{mapActions:f}=Object(h.a)("lan");var v={components:{WanBasic:s.a,WanAdvanced:u,WanStatus:w,ProgressBar:d.a},inject:["showConfirm"],data(){return this.CONFIG_SUPPORT_ISP="y"==window.CONFIG_SUPPORT_ISP,{wanCfg:{},wanAdvCfg:{},wanStatus:{},statusTimer:null,isLoading:!0,showReboot:!1,isChangeArg:!1,isWispMode:!1,isRouterMode:!1}},created(){this.getData(),this.statusTimer=setInterval(()=>{this.$getData({modules:"wanStatus"}).then(t=>{this.wanStatus=Object(o.e)(t.wanStatus),this.$set(this.wanAdvCfg,"wanMask",this.wanStatus.wanMask)})},3e3)},computed:{isRussiaType(){return this.wanCfg.ispType==n.n.RUSSIA},saveMsg(){return this.isNetworked&&!this.isChangeArg?_("Disconnect"):_("Connect")},isNetworked(){return this.wanStatus.connectCode==n.r.NETWORKED}},methods:{...Object(h.d)(["pushHideMenu","removeHideMenu"]),...f(["setAllIpData"]),getData(){this.$getData({modules:"wanCfg,wanAdvCfg,wanStatus,ipConfig,workMode"}).then(t=>{t.wanAdvCfg.wanDnsAuto=t.wanCfg.wanDnsAuto,t.wanAdvCfg.wanDns1=t.wanCfg.wanDns1,t.wanAdvCfg.wanDns2=t.wanCfg.wanDns2,t.wanAdvCfg.wanMask=t.wanStatus.wanMask,this.wanCfg=Object(o.e)(t.wanCfg),this.rawWanCfg=Object(o.e)(t.wanCfg),this.wanAdvCfg=Object(o.e)(t.wanAdvCfg),this.rawWanAdvCfg=Object(o.e)(t.wanAdvCfg),this.wanStatus=Object(o.e)(t.wanStatus),this.isChangeArg=!1,this.isLoading=!1,this.setAllIpData(t.ipConfig),this.isWispMode="wisp"===t.workMode.workMode,this.isRouterMode="router"===t.workMode.workMode})},submit(t){t.wanCfg.ispType=t.wanCfg.ispType||n.n.NORMAL;let a=this.shouldReboot(t),e=this.isNetworked&&!this.isChangeArg?{wanCfg:{action:"disconnect"}}:t;a?this.showConfirm(_("The device will reboot to make your configurations effective. Continue?")).then(()=>{this.submitData(e,a)}).catch(()=>{}):this.submitData(e,a)},submitData(t,a){this.$postModule(t,_("Saved successfully")).then(e=>{0==+e.errCode&&(a?this.showReboot=!0:(this.getData(),t.wanCfg.ispType&&"russia"==t.wanCfg.ispType?this.pushHideMenu(m.a.IPV6):this.isRouterMode&&this.removeHideMenu(m.a.IPV6)))})},changeWantype(t){this.$refs.wanAdv.changeWantype(t)},changeArgs(){this.isChangeArg=!0},shouldReboot(t){return this.isWispMode&&(t.wanCfg.ispType=n.n.NORMAL),this.CONFIG_SUPPORT_ISP&&this.rawWanCfg.ispType!=t.wanCfg.ispType?this.rawWanCfg.ispType!==n.n.NORMAL&&this.rawWanCfg.ispType!==n.n.RUSSIA||t.wanCfg.ispType!==n.n.NORMAL&&t.wanCfg.ispType!==n.n.RUSSIA:this.CONFIG_SUPPORT_ISP&&this.rawWanCfg.ispType!==n.n.MANUAL?t.wanCfg.area&&t.wanCfg.area!==this.rawWanCfg.area:this.rawWanCfg.ispType==n.n.MANUAL?this.rawWanCfg.vlanId!=t.wanCfg.vlanId||this.rawWanCfg.iptvVlanId!==t.wanCfg.iptvVlanId:void 0}},beforeDestroy(){clearInterval(this.statusTimer)}},g=Object(p.a)(v,(function render(){var t=this,a=t._self._c;return a("div",[a("v-loading",{attrs:{visible:t.isLoading}}),t.isLoading?t._e():a("v-page",{staticClass:"wan",attrs:{saveMsg:t.saveMsg,isSubmit:!1},on:{submit:t.submit}},[a("v-title",[t._v(t._s(t._("Internet Settings")))]),a("wan-status",{attrs:{formData:t.wanStatus}}),a("wan-basic",{attrs:{name:"wanCfg",formData:t.wanCfg,relativeData:t.wanAdvCfg,isWispMode:t.isWispMode},on:{changeWantype:t.changeWantype,changeArgs:t.changeArgs}}),a("wan-advanced",{ref:"wanAdv",attrs:{name:"wanAdvCfg",formData:t.wanAdvCfg,relativeData:t.wanCfg,isWispMode:t.isWispMode},on:{changeArgs:t.changeArgs}})],1),t.showReboot?a("progress-bar",{attrs:{title:t._("Rebootingâ€¦ Please wait")}}):t._e()],1)}),[],!1,null,null,null);a.default=g.exports},"87ae":function(t,a,e){"use strict";e("1af0")},9266:function(t,a,e){"use strict";e("b297")},b297:function(t,a,e){}}]);