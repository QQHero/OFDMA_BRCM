(window.webpackJsonp=window.webpackJsonp||[]).push([["wifiWps"],{8993:function(t,s,i){"use strict";i.r(s);var e={props:{leftTime:Number,wpsInfo:Object,isWpsConnecting:Boolean,isLoading:Boolean},data:()=>({time:0,updateTimer:null}),methods:{clickWps(t){this.$emit("click",t)},getTime(){clearInterval(this.updateTimer),this.updateTimer=setInterval(()=>{this.time<=1&&(clearInterval(this.updateTimer),this.isWpsConnecting&&this.$emit("stop")),this.time--},1e3)}},beforeDestroy(){clearInterval(this.updateTimer)},watch:{isWpsConnecting:{handler(t){t?this.leftTime>0&&(this.time=this.leftTime,this.getTime()):clearInterval(this.updateTimer)},immediate:!0}}},n=(i("a72e"),i("0b56")),a={components:{WpsButton:Object(n.a)(e,(function render(){var t=this,s=t._self._c;return s("div",{staticClass:"wps-button",on:{click:function(s){return t.clickWps(t.wpsInfo)}}},[t.isLoading?s("span",{staticClass:"wps-button__loading v-icon-loading"}):s("span",[t._v(t._s(t.isWpsConnecting&&t.time>0?t.time+t._("s"):t._("WPS")))])])}),[],!1,null,null,null).exports},props:{tableData:Array,isWpsConnecting:Boolean,isGetData:Boolean,clickWpsSn:String},data:()=>({updateTimer:null,time:0}),methods:{clickWps(t){this.isWpsConnecting||(t.action="wps",this.$emit("click-wps",t))}}},c=Object(n.a)(a,(function render(){var t=this,s=t._self._c;return s("div",[s("v-table",{attrs:{data:t.tableData}},[s("v-table-col",{attrs:{label:t._("Node Name"),prop:"nodeName",align:"center"},scopedSlots:t._u([{key:"default",fn:function(s){return[t._v(" "+t._s(s.nodeName)+" ")]}}])}),s("v-table-col",{attrs:{width:300,label:t._("Operation"),align:"center"},scopedSlots:t._u([{key:"default",fn:function(i){return[s("wps-button",{attrs:{"wps-info":i,"is-wps-connecting":t.isWpsConnecting&&"connecting"===i.wpsStatus,"is-loading":t.isGetData&&t.clickWpsSn===i.sn,"left-time":+i.leftTime},on:{click:t.clickWps,stop:function(s){return t.$emit("stop-wps")}}})]}}])})],1)],1)}),[],!1,null,null,null).exports,p=i("710d"),o={components:{WifiWps:c},data:()=>({pageTips:_("With this function enabled, wireless clients, such as mobile phones, can connect to the router's WiFi network of the router easily."),wifiWpsList:[],updateTimer:null,isWpsConnecting:!1,isLoading:!0,isGetData:!1,wpsSn:"",clickWpsSn:"",hasResult:!1}),created(){this.getData()},methods:{getData(){this.$getData({modules:"wifiWpsList"}).then(t=>{this.isLoading=!1,this.isWpsConnecting=t.wifiWpsList.some(t=>{if("connecting"===t.wpsStatus)return this.wpsSn=t.sn,!0}),this.isWpsConnecting&&this.update(),this.wifiWpsList=[],this.wifiWpsList=Object(p.e)(t.wifiWpsList)})},getWpsStatus(t){this.$getData({modules:"wifiWpsList"}).then(s=>{if(this.isGetData=!1,!this.hasResult&&(this.isWpsConnecting=s.wifiWpsList.some(t=>{if("connecting"===t.wpsStatus)return this.wpsSn=t.sn,!0}),t&&(this.wifiWpsList=[],this.wifiWpsList=Object(p.e)(s.wifiWpsList)),!this.isWpsConnecting)){let t=s.wifiWpsList.filter(t=>t.sn===this.wpsSn)[0]||{};this.hasResult=!0,"connected"===t.wpsStatus?this.$message.success(_("WPS connection succeeded")):this.$message.success(_("WPS function is disabled")),clearInterval(this.updateTimer)}})},clickWps(t){this.isGetData||(this.clickWpsSn=t.sn,this.$postModule({wifiWpsList:[t]}).then(()=>{this.isGetData=!0,this.hasResult=!1,setTimeout(()=>{this.getWpsStatus(!0),this.update()},5e3)}))},update(){clearInterval(this.updateTimer),this.updateTimer=setInterval(()=>{this.getWpsStatus()},5e3)},stopWps(){this.hasResult=!0,this.isWpsConnecting=!1,this.$message.success(_("WPS function is disabled")),clearInterval(this.updateTimer)}},beforeDestroy(){clearInterval(this.updateTimer)}},l=Object(n.a)(o,(function render(){var t=this,s=t._self._c;return s("div",[s("v-loading",{attrs:{visible:t.isLoading}}),t.isLoading?t._e():s("v-page",{ref:"page",attrs:{"show-footer":!1},on:{init:t.getData}},[s("v-page-title",{attrs:{title:t._("WPS"),tips:t.pageTips}}),s("wifi-wps",{attrs:{"table-data":t.wifiWpsList,"is-get-data":t.isGetData,"click-wps-sn":t.clickWpsSn,"is-wps-connecting":t.isWpsConnecting},on:{"click-wps":t.clickWps,"stop-wps":t.stopWps}})],1)],1)}),[],!1,null,null,null);s.default=l.exports},a72e:function(t,s,i){"use strict";i("bd99")},bd99:function(t,s,i){}}]);